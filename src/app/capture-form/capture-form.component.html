<mat-horizontal-stepper [linear]="isLinear" #stepper class="capture-form-component">
  <mat-step [stepControl]="firstFormGroup">
    <form [formGroup]="firstFormGroup">
      <ng-template matStepLabel>Paso 1</ng-template>

      <div class="row">
        <h4 class="col-12 p-3 header-title">INFORMACIÓN GENERAL / GENERAL INFORMATION</h4>
        <mat-form-field class="col-xl-4 col-12" appearance="outline">
          <mat-label>NIT en Guatemala</mat-label>
          <input matInput formControlName="nit">
        </mat-form-field>

        <mat-radio-group formControlName="status" class="col-xl-4 col-12 d-flex align-items-center">
          <mat-radio-button value="1" class="mr-3">Ingreso / Arrival</mat-radio-button>
          <mat-radio-button value="2">Salida / Departure</mat-radio-button>
        </mat-radio-group>

        <mat-form-field class="col-xl-4 col-12" appearance="outline">
          <mat-label>Fecha / Date</mat-label>
          <input matInput [matDatepicker]="pickerDate" formControlName="date" readonly>
          <mat-datepicker-toggle matSuffix [for]="pickerDate"></mat-datepicker-toggle>
          <mat-datepicker #pickerDate></mat-datepicker>
        </mat-form-field>

        <mat-form-field class="col-xl-6 col-12" appearance="outline">
          <mat-label>Aduana de Ingreso o Egreso del país / Arrival or Departure customs</mat-label>
          <input matInput
                 formControlName="incomeExit">
        </mat-form-field>

        <mat-form-field class="col-xl-3 col-12" appearance="outline">
          <mat-label>Apellidos / Last Names</mat-label>
          <input matInput
                 formControlName="lastName">
        </mat-form-field>

        <mat-form-field class="col-xl-3 col-12" appearance="outline">
          <mat-label>Nombres / Names</mat-label>
          <input matInput
                 formControlName="names">
        </mat-form-field>

        <div class="col-12 d-inline-block">
          <h6 class="col-12 pl-0 pr-0">Tipo Documento / Document Type</h6>

          <div class="row d-flex align-items-center">
            <div class="col-xl-8 col-8">
              <div class="row">
                <div class="col-xl-{{item.lengthType !== 1 ? (item.lengthType + 3) : (item.lengthType + 2)}}" *ngFor="let item  of documentTypeList; let index = index;">
                  <div class="row">
                    <label class="col-12" [ngClass]="{'field-empty' : item.nombre === 'na'}">{{item.nombre === 'na' ? '' : item.nombre}}</label>
                    <mat-radio-group formControlName="documentType" *ngIf="item.id === (index + 1)"
                                     class="col-xl-12 col-12 d-flex align-items-center text-right justify-content-end">
                      <mat-radio-button value="{{item.id}}" class="mr-3" *ngFor="let sub of item.subType">{{sub.nombre}}</mat-radio-button>
                    </mat-radio-group>
                  </div>
                </div>
              </div>
            </div>

            <mat-form-field class="col-xl-4 col-12" appearance="outline">
              <mat-label>Número / Number</mat-label>
              <input matInput
                     formControlName="documentTypeNumber">
            </mat-form-field>
          </div>
        </div>

        <mat-form-field class="col-xl-4 col-12" appearance="outline">
          <mat-label>Profesión u oficio / Occupation</mat-label>
          <mat-select formControlName="occupation">
            <mat-option value="{{item.id}}" *ngFor="let item of occupationList">
              {{item.nombre}}
            </mat-option>
          </mat-select>
        </mat-form-field>

        <mat-form-field class="col-xl-4 col-12" appearance="outline">
          <mat-label>Nacionalidad / Nationality</mat-label>
          <mat-select formControlName="nationality">
            <mat-option *ngFor="let country of listCountry" value="{{country.id}}">
              {{country.value}}
            </mat-option>
          </mat-select>
        </mat-form-field>

        <mat-radio-group formControlName="sex" class="col-xl-4 col-12 d-flex align-items-center justify-content-end">
          <mat-radio-button value="{{item?.idGenero}}" class="mr-3" *ngFor="let item of genderList">{{item?.nombre}}</mat-radio-button>
        </mat-radio-group>

        <mat-form-field appearance="outline" class="col-xl-5 col-12">
          <mat-label>País de residencia / Country of residence</mat-label>
          <mat-select formControlName="residence">
            <mat-option *ngFor="let country of listCountry" [value]="country.id">
              {{country.value}}
            </mat-option>
          </mat-select>
        </mat-form-field>

        <mat-form-field appearance="outline" class="col-xl-4 col-12">
          <mat-label>País de nacimiento / Country of Birth</mat-label>
          <mat-select formControlName="countryOfBirth">
            <mat-option *ngFor="let country of listCountry" [value]="country.id">
              {{country.value}}
            </mat-option>
          </mat-select>
        </mat-form-field>

        <mat-form-field class="col-xl-3 col-12" appearance="outline">
          <mat-label>Fecha / Date</mat-label>
          <input matInput [matDatepicker]="pickerBirthDate" formControlName="birthDate" readonly>
          <mat-datepicker-toggle matSuffix [for]="pickerBirthDate"></mat-datepicker-toggle>
          <mat-datepicker #pickerBirthDate></mat-datepicker>
        </mat-form-field>

        <mat-form-field class="col-12" appearance="outline">
          <mat-label>Dirección prevista / Foreseen Address</mat-label>
          <input matInput formControlName="foreseenAddress">
        </mat-form-field>
      </div>

      <div class="buttons-content mt-3">
        <button mat-flat-button color="primary" matStepperNext class="btn-next">
          Continuar <mat-icon class="ml-3">arrow_forward</mat-icon>
        </button>
      </div>
    </form>
  </mat-step>

  <mat-step [stepControl]="secondFormGroup">
    <form [formGroup]="secondFormGroup">
      <ng-template matStepLabel>Paso 2</ng-template>

      <div class="row">
        <mat-form-field class="col-12" appearance="outline">
          <mat-label>País de procedencia / Country of departure</mat-label>
          <input matInput formControlName="field11">
        </mat-form-field>

        <mat-form-field class="col-12" appearance="outline">
          <mat-label>País de destino / Country of destination</mat-label>
          <input matInput formControlName="field12">
        </mat-form-field>

        <div class="col-12">
          <div class="row">
            <label class="col-5">Motivo primordial del viaje / Purpose of the trip</label>
            <mat-radio-group formControlName="field13" class="col-7">
              <mat-radio-button *ngFor="let item of constants.LIST_FIELD_13"
                                [value]="item.id" class="mr-3">{{item.value}}</mat-radio-button>
            </mat-radio-group>
          </div>
        </div>

        <mat-divider class="col-12 mt-2 mb-2"></mat-divider>

        <div class="col-12">
          <div class="row">
            <label class="col-5">Medio de transporte / Means of transportation</label>
            <mat-radio-group formControlName="field14" class="col-7">
              <mat-radio-button *ngFor="let item of constants.LIST_FIELD_14"
                                [value]="item.id" class="mr-3">{{item.value}}</mat-radio-button>
            </mat-radio-group>
          </div>
        </div>

        <mat-divider class="col-12 mt-2 mb-2"></mat-divider>

        <div class="row pl-3 pr-3">
          <div class="col-3">
            Empresa y número de viaje (vuelo) /
            Airline and Flight No.
          </div>
          <div class="col-3">
            Placa vehículo No. /
            Vehicle No.
          </div>
          <div class="col-3">
            Barco y número de viaje:
            Vessel name and number:
          </div>
          <mat-form-field class="col-3" appearance="outline">
            <input matInput formControlName="field12">
          </mat-form-field>
        </div>
      </div>

      <div class="buttons-content mt-3">
        <button mat-flat-button color="primary" matStepperPrevious class="mr-3 btn-back">
          <mat-icon class="mr-3">arrow_back</mat-icon> Regresar
        </button>
        <button mat-flat-button color="primary" matStepperNext class="btn-next">
          Continuar <mat-icon class="ml-3">arrow_forward</mat-icon>
        </button>
      </div>
    </form>
  </mat-step>

  <mat-step [stepControl]="thirdFormGroup">
    <form [formGroup]="thirdFormGroup">
      <ng-template matStepLabel>Paso 3</ng-template>

      <div class="row justify-content-center">
        <label class="col-10">Trae consigo en efectivoo en documento una cantidad mayor o igual a USS10,000.00
          O su equivalente en moneda nacional Are you carrying currency or monetary instruments
          over or equal to USS10,000.00 or its equivalent 1n national currency?</label>
        <mat-radio-group formControlName="field16" class="col-2 p-0" formControlName="field16">
          <mat-radio-button *ngFor="let item of constants.LIST_FIELD_16"
                            [value]="item.id" class="mr-3">{{item.value}}</mat-radio-button>
        </mat-radio-group>

        <div *ngIf="thirdFormGroup.get('field16').value === 1">
          <mat-divider class="col-12 mt-2 mb-2"></mat-divider>

          <label class="col-12">
            En caso afirmativo favor indicar lo siguiente: / If you marked yes, please provide the following information:
          </label>

          <table class="table-s2 col-12">
            <tr class="row m-0 header">
              <th class="col-3 text-center">Tipo de Moneda /<br> Currency</th>
              <th class="col-3 text-center">Clase de Título /<br> Credit title</th>
              <th class="col-3 text-center">Cantidad /<br> Amount</th>
              <th class="col-3 text-center">Orígen de los fondos /<br> Origin of funds</th>
            </tr>
            <tr class="row pl-3 d-flex justify-content-center align-items-center"
                *ngFor="let item of dataSource">
              <td class="col-3">
                <mat-form-field class="col-12 pl-0">
                  <input matInput [(ngModel)]="item.a1" [ngModelOptions]="{standalone: true}" (change)="verifyValue()"/>
                </mat-form-field>
              </td>
              <td class="col-3">
                <mat-form-field class="col-12 pl-0">
                  <input matInput [(ngModel)]="item.a2" [ngModelOptions]="{standalone: true}" (change)="verifyValue()"/>
                </mat-form-field>
              </td>
              <td class="col-3">
                <mat-form-field class="col-12 pl-0">
                  <input matInput [(ngModel)]="item.a3" [ngModelOptions]="{standalone: true}" (change)="verifyValue()"/>
                </mat-form-field>
              </td>
              <td class="col-3">
                <mat-form-field class="col-12 pl-0">
                  <input matInput [(ngModel)]="item.a4" [ngModelOptions]="{standalone: true}" (change)="verifyValue()"/>
                </mat-form-field>
              </td>
            </tr>
          </table>
        </div>
      </div>

      <div class="buttons-content mt-3">
        <button mat-flat-button color="primary" matStepperPrevious class="mr-3 btn-back">
          <mat-icon class="mr-3">arrow_back</mat-icon> Regresar
        </button>
        <button mat-flat-button color="primary" matStepperNext class="btn-next">
          Continuar <mat-icon class="ml-3">arrow_forward</mat-icon>
        </button>

        <a href="../../assets/ReporteEjemplo.pdf" download="Reporte.pdf" class="ml-5 btn-print"
           mat-flat-button color="primary"
           *ngIf="firstFormGroup.get('status').value === '2' && thirdFormGroup.get('field16').value === 1 &&
           dataSourceValidate">
          Descargar formulario <mat-icon class="ml-3">print</mat-icon>
        </a>
      </div>
    </form>
  </mat-step>

  <mat-step [stepControl]="fourFormGroup" *ngIf="firstFormGroup.get('status').value === '1'">
    <form [formGroup]="fourFormGroup">
      <ng-template matStepLabel>Paso 4</ng-template>

      <div class="row">
        <h4 class="header-title p-3 col-12">
          DECLARE TODOS LOS BIENES QUEHAYA ADQUIRIDO EN EL EXTERIOR Y QUE TRAE A GUATEMALA /<br>
          YOU MUST DECLARE ALL ARTICLES ACQUIRED ABROAD AND IN YOUR POSSESSION AT THE TIME OF YOUR RETURN
        </h4>

        <label class="col-12 mt-1 mb-3">
          Estoy ingresando a Guatemala lo siguiente: /<br> I am bringing into Guatemala the following: Lea detenidamente
          las instrucciones al dorso, antes de dar su respuesta. / Before answering read carefully instructions on the back.
        </label>

        <table class="table-s2 col-12">
          <tr class="row m-0 header">
            <th class="col-3 text-center">Español</th>
            <th class="col-3 text-center">English</th>
            <th class="col-1 text-center">Si /<br> Yes</th>
            <th class="col-1 text-center">No</th>
            <th class="col-2 text-center">Valor en US$<br>Value in US$</th>
            <th class="col-2 text-center">Uso Aduana / SAT<br>CUSTOMS USE ONLY</th>
          </tr>
          <tr class="row pl-3 d-flex justify-content-center align-items-center"
              *ngFor="let item of constants.LIST_FIELD_18">
            <td class="col-3">
              <label>{{item.es}}</label>
            </td>
            <td class="col-3">
              <label>{{item.en}}</label>
            </td>
            <td class="col-1 pl-0 text-center">
              <mat-checkbox [(ngModel)]="item.yes" [ngModelOptions]="{standalone: true}"></mat-checkbox>
            </td>
            <td class="col-1 pl-0 text-center">
              <mat-checkbox [(ngModel)]="item.no" [ngModelOptions]="{standalone: true}"></mat-checkbox>
            </td>
            <td class="col-2 pl-0">
              <mat-form-field class="col-12 pl-0">
                <input matInput [value]="item.valueUs" [(ngModel)]="item.valueUs" [ngModelOptions]="{standalone: true}"/>
              </mat-form-field>
            </td>
            <td class="col-2 pl-0">
              <mat-form-field class="col-12 pl-0">
                <input matInput [value]="item.sat" [(ngModel)]="item.sat" [ngModelOptions]="{standalone: true}"/>
              </mat-form-field>
            </td>

          </tr>
        </table>

        <div class="table-v">

        </div>
      </div>

      <div class="buttons-content mt-3">
        <button mat-flat-button color="primary" matStepperPrevious class="mr-3 btn-back">
          <mat-icon class="mr-3">arrow_back</mat-icon> Regresar
        </button>
        <button mat-flat-button color="primary" matStepperNext class="btn-next">
          Continuar <mat-icon class="ml-3">arrow_forward</mat-icon>
        </button>

        <a href="../../assets/ReporteEjemplo.pdf" download="Reporte.pdf" class="ml-5 btn-print"
           mat-flat-button color="primary">
          Descargar formulario <mat-icon class="ml-3">print</mat-icon>
        </a>
      </div>
    </form>
  </mat-step>

</mat-horizontal-stepper>
